<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <record id="sale_order_product_pricing_form" model="ir.ui.view">
            <field name="name">sale.order.product.pricing.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">

                <field name="partner_id" position="after">
                    <field name="product_pricing" groups="sale_order_product_pricing.product_pricing_group"
                           attrs="{'invisible': [('partner_id', '=', False )]}"/>
                </field>
                <xpath expr="//field[@name='order_line']/tree/field[@name='name']" position="attributes">
                    <attribute name="optional">hide</attribute>
                </xpath>


                <xpath expr="//notebook/page[@name='customer_signature']" position="after">
                    <page string="Product Pricing" name="product_pricing"
                          attrs="{'invisible': [('product_pricing', '=', False)],'readonly':[('state', '=', 'sale')]}"
                          groups="sale_order_product_pricing.product_pricing_group">
                        <button string="Apply" name="apply_estimate_product_price" type="object"
                                class="btn-primary" attrs="{'readonly':[('state', '=', 'sale')]}"/>
                        <group>
                            <group>
                                <field name="change_currency_rate_type" string="Change Type"
                                       attrs="{'readonly':[('state', '=', 'sale')]}"/>
                                <field name="change_currency_rate" attrs="{'readonly':[('state', '=', 'sale')]}"/>
                                <field name="global_factor" attrs="{'readonly':[('state', '=', 'sale')]}"/>
                            </group>
                            <group>
                                <field name="currency_id" invisible="1" attrs="{'readonly':[('state', '=', 'sale')]}"/>
                                <field name="currency_estimate_id" readonly="0" attrs="{'readonly':[('state', '=', 'sale')]}"/>
                                <field name="currency_rate" invisible="1"/>
                                <field name="currency_rate_estimate"/>
                                <field name="currency_rate_inverse"/>
                            </group>
                        </group>
                        <field name="product_pricing_ids" nolable="1" attrs="{'readonly':[('state', '=', 'sale')]}">
                            <tree editable="bottom" create="0" delete="0">
                                <field name="company_id" invisible="1"/>
                                <field name="product_uom_category_id" invisible="1"/>
                                <field name="product_id"/>
                                <field name="name"/>

                                <field name="product_vendor" optional="hide"/>
                                <field name="product_family_name" optional="hide"/>
                                <field name="product_power" optional="hide"/>
                                <field name="product_ip" optional="hide"/>
                                <field name="product_lumen" optional="hide"/>
                                <field name="manufacturer" optional="show"/>
                                <field name="origin" optional="show"/>
                                <field name="qty_estimate"
                                       readonly="1"
                                       force_save="1"
                                       optional="show"/>
                                <field name="product_uom" optional="show"/>
                                <field name="route_id" optional="show"/>
                                <field name="estimate_unit_price" sum="Total Estimate"/>
                                <field name="purchase_price_estimate" optional="show" string="Purchase Price"
                                       sum="Total"/>
                                <field name="discount" optional="show"/>
                                <field name="discount_2" optional="show"/>
                                <field name="discount_3" optional="show"/>
                                <field name="purchase_price" optional="show"/>
                                <field name="margin" optional="show"/>
                                <field name="margin_percent" optional="show"/>
                                <field name="currency_estimate_id" optional="show"/>
                                <field name="currency_rate_estimate" optional="show"/>
                                <field name="factor" optional="show" sum="Total Factor"/>
                                <field name="line_factor" optional="show" />
                                <field name="note" optional="show"/>
                            </tree>
                        </field>
                        <group class="oe_subtotal_footer oe_right" name="estimate_sale_total">
                            <div class="o_row">
                                <h1>
                                    <field name="total_estimate_unit_price" nolable="1" readonly="1"/>
                                </h1>
                                <h1>
                                    <field name="currency_estimate_id_symbol" nolable="1" readonly="1"/>

                                </h1>
                            </div>



                        </group>

                    </page>
                </xpath>
            </field>
        </record>
    </data>
</odoo>